## Opdatering 2. juli 2025 ##

Bucketlist-couple:
Projektet har fået opdateret arkitekturen omkring bucket-funktionalitet, så Next.js-kompatibilitet sikres, og alle React/context-fejl fjernes.

Overblik over ændringer:

Opdeling af context og side:

Context-provider (BucketProvider + useBucket) ligger nu i /context/BucketContext.tsx med "use client" i toppen.

/app/bucketlist-couple/page.tsx indeholder kun rendering/visning og bruger altid export default function ....

Ingen context eller createContext i page.tsx – alle Next.js “default export is not a React Component”-fejl løst.

Tilføjelser og rettelser:

Al bucket CRUD håndteres via addBucket, updateBucket, mm., med imageUrl som URL-streng (ikke filobjekt).

Brug af Supabase opdateret til at arbejde mod tabellen bucketlist_couple.

Underkomponenter (BucketlistCoupleContent) anbefales til visning og formularer.

Koden er nu robust over for Next.js 13/14/15 app-router regler.

Fejl omkring “createContext” og hooks løst via tydelig “use client”-adskillelse.

Fejlhåndtering og debug:

Alle typiske build-fejl og import/eksport-problemer beskrevet og håndteret.

Der er indført stricte regler for, hvordan context importeres/bruges i projektet.

## Opdatering 2025-07-04 ##

Bucketlist – Redigering og sletning af delmål (timeline)
Nyt:
Det er nu muligt at redigere og slette delmål (subgoals) direkte i timeline-visningen på Bucketlist for Par.

Hver delmål har nu to knapper:

Rediger: Mulighed for at rette titel, deadline og ansvarlig direkte inline på listen. Ændringer gemmes til Supabase.

Slet: Giver bekræftelse før sletning. Sletning opdaterer også Supabase og UI.

Teknisk
BucketContext er udvidet med updateSubgoal og deleteSubgoal metoder.

BucketTimeline.tsx bruger disse metoder til at håndtere redigering/sletning, med tilstandsstyring for aktiv redigering/sletning per subgoal.

Mulighed for at annullere ændringer eller fortryde sletning.

UI/UX
Knappen “Rediger” åbner inputfelter direkte på delmålet.

Slet-knappen viser bekræftelsesfelt inden endelig handling.

Intet af den eksisterende kode til tilføjelse/check af delmål er ændret.

Alt er mobilvenligt og følger det eksisterende card-design.

Øvrige forbedringer
Badge-designet på BucketCard bruger nu global Badge-komponent fra /components/ui/badge.tsx til både kategori, ansvarlig og deadline.

Progressbar og spacing på kort er tilpasset for et mere rent og moderne look.

Database

Ingen ændringer i tabelstruktur – alle ændringer sker på data i feltet goals i bucketlist_couple.

## Seneste opdateringer (2025-07-06) ##

1. Sexstillinger / Inspirationsunivers
Vi har oprettet en side /sex/positions som fungerer som et inspirationsunivers for sexstillinger.

Siden viser alle stillinger som kort, inkl. billede, beskrivelse, status ("ny", "prøvet", "afvist") og hvor mange gange den er prøvet (tried_count).

Modal til visning og redigering af hver stilling.

Mulighed for at oprette nye stillinger, inkl. upload af billede til Supabase Storage (bucket: sex-positions-images).

Mulighed for at redigere eksisterende stillinger samt slette dem.

Al upload og læsning styres af RLS policies: (auth.role() = 'authenticated') AND (bucket_id = 'sex-positions-images') for alle fire rettigheder.

2. Check-in side /indtjekning/sex
Stilling-data på check-in siden trækkes nu direkte fra sex_positions-tabellen.

Der vises autocomplete-søgning for stillinger samt chips for de 10 mest brugte.

Mulighed for at tilføje ny stilling direkte fra check-in.

Hver stilling kan nu have billede, og antal gange den er brugt vises (hvis feltet er >0).

Fejl med manglende felter i tabellen løst ved at sikre at både tried_count og image_url findes.

3. Database / Supabase
sex_positions-tabellen er udvidet med kolonnerne:

image_url (text, nullable)

description (text, nullable)

status (text, nullable – enum-lignende: 'ny', 'prøvet', 'afvist')

tried_count (integer, default 0)

Storage bucket sex-positions-images oprettet med policies for authenticated access.

Policies for storage select, insert, update og delete sat ens.

4. Rettelser og fejlretning
Sikret at kode til både /indtjekning/sex og /sex/positions aldrig strippes, men leveres komplet.

Fejl omkring properties som ikke findes (f.eks. tried_count) er løst ved at sikre korrekt supabase select og types.

Alle visuelle og funktionelle ønsker til UI på begge sider indført, inkl. kortvisning og modal.

Næste skridt
Videreudvikling på /sex/positions

Mulighed for at filtrere/udvælge stillinger baseret på status, tags eller hyppighed.

Mulighed for at afvise stillinger eller markere dem som prøvet X gange direkte fra inspirationsuniverset.

Integrere gamification/XP med brug af stillinger.

Forbedre billedhåndtering, evt. støtte for flere billeder pr. stilling.

Evt. kobling direkte fra inspirationsunivers til check-in (vælg fra inspirationsunivers ved registrering).
