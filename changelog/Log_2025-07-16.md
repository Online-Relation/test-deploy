## Changelog - GPT session 2025-07-18 Part 2 ##

Database√¶ndringer
1. Ny tabel: dates_ratings
Form√•l: Gemmer brugernes vurderinger (rating + kommentar) af afholdte dates.

Kolonner:

id (UUID, Primary Key)

date_id (reference til modal_objects.id)

user_id (reference til brugerens ID)

rating (integer, 1-5)

comment (tekst, valgfri)

created_at (timestamp, default now())

2. Tilretning af modal_objects
Sikret at kolonnen status bruges og opdateres som:

"idea" ‚Üí "planned" ‚Üí "done"

Kolonnen mission (tekstfelt) er anvendt til visning af missioner for dates.

üöÄ Funktionalitets√¶ndringer & Tilf√∏jelser
1. DateMissionWidget (ny og opdateret widget)
Viser mission for n√¶ste kommende date, hvis status = "planned".

N√•r en date er overst√•et (status = "done"), vises et rating-card med 1-5 stjerner og kommentarfelt.

Bruger kan kun rate √©n gang pr. date (tjek via dates_ratings-tabel).

Dynamisk feedback-tekst:

1-3 stjerner: "Din partner har helt sikkert pr√∏vet at g√∏re det til en god dateday. Husk at fort√¶l din partner hvad ikke fungerede for dig."

4-5 stjerner: "Din partner bliver glad for at h√∏re det har v√¶ret en god oplevelse for dig. Husk at fort√¶l hvorfor det var en god date for dig."

Efter rating:

Viser takke-besked i 5 sekunder, hvorefter n√¶ste mission (eller ingenting, hvis ingen flere) vises automatisk.

2. Widget-refresh
Widgetten opdaterer nu korrekt og viser n√¶ste relevante date eller skjuler sig, hvis ingen findes.

3. Brugeroplevelse og design
Widget fylder nu hele bredden som de andre widgets.

L√¶kker visuel stil, illustration og tydelig CTA.

Alt tekst centreret og tilpasset til b√•de mission-visning og feedback/bed√∏mmelse.

4. Dashboard integration
Widget er koblet ind i dashboardets widget-system, og benytter brugerens ID fra context.

Underst√∏tter flere brugere (rating og mission hentes p√• baggrund af userId).

üìã Hvad skal du sikre dig fremover?
Dates skal skifte status fra "planned" til "done" (f.eks. via cron-job, backend eller manuel proces), s√• rating kan udl√∏ses.

B√•de dig og Stine kan nu i fremtiden gives mulighed for at rate ‚Äì evt. udvid dates_ratings med flere roller/felter hvis begge parter skal rate hver date.

‚úÖ Afsluttende note
Alt kode er refaktoreret s√• der ikke strips funktionalitet eller bryder eksisterende flows.

Hvis du vil have det hele dokumenteret som README, kan jeg ogs√• levere det.


## Changelog - GPT session 2025-07-18 Part 1##

Opdatering til changelog:

Implementeret DateBoard med drag-and-drop og modal-redigering inkl. kategori- og billedh√•ndtering.

Justeret types i modal-komponenter og KanbanBoard for bedre type-sikkerhed og konsistens.

Tilf√∏jet omfattende console.log til fejls√∏gning i DateBoard, CategoryDropdown og modaler.

N√¶ste skridt:

Udvikling af en dynamisk widget, der automatisk viser missionsbeskeden for dates, som ligger pr√¶cis 24 timer f√∏r deres planlagte dato.

Widgeten skal hente dates med planlagt dato (planned_date), filtrere p√• de dates, hvor nuv√¶rende tidspunkt er indenfor 24 timer f√∏r den planlagte dato.

For hver relevant date skal widgeten vise titel, missionsbesked (mission) og evt. andre n√∏gleinformationer i et kompakt og brugervenligt UI.

Widgeten skal kunne integreres p√• dashboard eller andre relevante sider, og opdatere sig selv dynamisk efter dato√¶ndringer i dates.

T√¶nkes med fokus p√• performance, realtidsopdatering og brugervenlighed.

GlobalModal (breaking UI/UX fix)

Edit-mode i GlobalModal nulstilles nu automatisk hver gang modalId, typeId eller open √¶ndrer sig (nyt billede/modal √•bnes).

Det forhindrer at man "h√¶nger fast" i edit-mode n√•r man √•bner en ny modal efter at have v√¶ret i edit p√• en anden.

useEffect hook tilf√∏jet til h√•ndtering af reset af edit state.

√òvrige rettelser

onDelete prop f√∏res korrekt videre til GlobalModalEditForm for sikker h√•ndtering af sletning.

Ingen visuelle eller funktionsm√¶ssige √¶ndringer for slutbrugeren udover forbedret modal-adf√¶rd.

## Changelog - GPT session 2025-07-16 ##
Globale modaler, boards og features:

Global modal: Underst√∏tter nu feltet ‚ÄúPlanlagt dato‚Äù (planned_date) for type date-idea. Feltet kan nu tilf√∏jes, redigeres og vises i modalen og preview-kortet.

Supabase schema:

Tilf√∏jet feltet planned_date til modal_objects-tabellen.

Tilf√∏jet/valideret feltet status p√• alle modal-objekter for kanban-funktionalitet.

Date Ideas Board:

Kanban-board med tre kolonner (‚ÄúId√©er‚Äù, ‚ÄúPlanlagt‚Äù, ‚ÄúFuldf√∏rt‚Äù).

Drag & drop mellem kolonner opdaterer automatisk status i databasen.

Oprettelse af nye date ideas direkte i √∏nsket kolonne via modal.

Genanvendeligt KanbanBoard:

Drag & drop flyttet til komponenten /components/common/KanbanBoard.tsx til genbrug p√• tv√¶rs af boards.

Board-UI opdateret med border omkring kolonner.

Visning og redigering af planlagt dato:

Datoen vises p√• preview-card for alle date-ideas.

Dato-felt vises kun i modalen, hvis typen er ‚Äúdate-idea‚Äù.

Widget support:

Opskrift og kode til ‚ÄúUpcoming Date‚Äù-widget, som automatisk finder og viser den n√¶ste planlagte date (status=planned, planned_date >= i dag).

XP/point-struktur:

Fastlagt at XP/point ikke skal gemmes p√• modal_objects, men kun logges i xp_log n√•r handlinger udf√∏res (f.eks. date gennemf√∏rt).

Database-migration:

SQL tilf√∏jet for at sikre kolonnerne: planned_date, completed_date, status (og eventuelt points) findes p√• modal_objects.

St√∏rre arkitekturvalg og principper:

Alle boards/features bruger nu √©n f√¶lles tabel (modal_objects) med type/status, ikke separate tabeller pr. feature.

Felter, der kun bruges af enkelte features (fx planlagt dato p√• date-ideas), kan trygt ligge i tabellen ‚Äì de andre features ignorerer dem.

ModalCard, GlobalModal, GlobalModalEditForm og KanbanBoard tilrettet s√• nye felter og status h√•ndteres i hele flowet.

UI/UX-forbedringer:

Responsive tilf√∏j/fjern-knapper p√• mobil for kommentarer og kategorier.

Board-kolonner nu med border for klar adskillelse.

√òvrigt:

Alt kode er tilrettet, s√• der ikke opst√•r TypeScript-fejl, og alle props/felter sendes korrekt videre gennem hele UI-k√¶den.

N√¶ste mulige skridt:

Tilf√∏je felt for completed_date og/eller markering som ‚Äúfuldf√∏rt‚Äù med XP-log

Drag & drop sortering inden for kolonner

Flere widgets eller dashboards baseret p√• modal_objects




## Changelog - GPT session 2025-07-16 ##
1. Databasens tabeller (Supabase)
A. modal_objects
Hovedtabel for alle modal-forekomster.
Kolonner (alle relevante):

Kolonnenavn	Type	Noter
id	uuid	Prim√¶rn√∏gle (autogen.)
type	text	F.eks. 'fantasy', 'bucketlist'
reference_id	text/uuid	ID fra relateret tabel (valgfri)
title	text	Titel for modal (valgfri)
image_url	text	Banner-billede (valgfri)
created_by	uuid	User id (relationsn√∏gle)
created_at	timestamp	
categories	jsonb	Array af kategori-objekter
gallery_images	jsonb	Array af billeder
description	text	Richtext/HTML

B. modal_categories
Kategorier, der kan v√¶lges og tilf√∏jes p√• modaler.

Kolonnenavn	Type	Noter
id	uuid	Prim√¶rn√∏gle
label	text	Navn p√• kategori
color	text	'orange'
type	text	F.eks. 'fantasy', 'bucketlist'
...	...	

C. comments
Kommentarer til modal (pr. modal id).

Kolonnenavn	Type	Noter
id	uuid	
modal_id	uuid	Reference til modal_objects
text	text	Kommentar-indhold
author	uuid	User id
author_name	text	Vises i UI
created_at	timestamp	

2. Kernefiler & komponenter i frontend
(Sti & form√•l ‚Äì seneste/aktive versioner)

/lib/modalObjects.ts
CRUD-funktioner: createModalObject, updateModalObject, fetchModalObject, fetchAllModalObjects. H√•ndterer hele modal-objektet, inkl. kategorier, billeder, beskrivelse m.m. via jsonb-felter.

/components/ui/globalmodal/ModalCard.tsx
Viser kort (card) for hver modal p√• fx en oversigtsside. √Öbner modal-popup via GlobalModal og viser bruger, titel, billede, kategori, kommentar osv. Benytter updateModalObject til redigering.

/components/ui/globalmodal/GlobalModal.tsx
Den egentlige modal-popup-komponent. Viser indhold, galleri, richtext, badge, og lader brugeren redigere modal-objekt via GlobalModalEditForm.

/components/ui/globalmodal/GlobalModalEditForm.tsx
Formular til at redigere titel, billede, galleri, kategori, beskrivelse osv. Kalder onSave med alle data.

/components/ui/globalmodal/CategorySelect.tsx
S√∏g, v√¶lg eller opret kategori (med type-felt). Henter/sender data til modal_categories.

/components/ui/globalmodal/CommentSection.tsx
Viser kommentarer for den aktuelle modal (modal_id). H√•ndterer post/fetch via Supabase.

/components/ui/globalmodal/types.ts
Indeholder type-definitioner for bl.a. Category og GalleryImage.

3. Modal-objektets dataflow og logik
Et modal-objekt har:

title (text)

type (text, bruges til at filtrere, gruppere osv.)

categories (array af category-objekter, jsonb)

gallery_images (array, jsonb)

image_url (enkelt bannerbillede)

beskrivelse (richtext/HTML)

relationer til bruger (created_by) og kommentarer

N√•r du opretter eller redigerer modal:

Data gemmes som JSON (categories, gallery_images).

Type skal v√¶lges eller oprettes, pr√¶cis som kategori (det mangler stadig at blive lavet som UI, se nedenfor).

CRUD-funktioner i /lib/modalObjects.ts s√∏rger for oprettelse, l√¶sning og opdatering i Supabase.

4. Hvad mangler/f√∏lgende steps?
A. Type-v√¶lger og type-h√•ndtering
Du mangler et felt til at v√¶lge eller oprette 'type' direkte fra modal-edit-form.

Det skal virke n√∏jagtig ligesom CategorySelect ‚Äì alts√• at man kan v√¶lge mellem eksisterende 'types', s√∏ge, og oprette ny type. Type skal sendes til b√•de modal-objektet og til evt. nye kategorier, s√• kategorier altid oprettes med type.

B. UI til at vise og v√¶lge type
Tilf√∏j en ny komponent f.eks. TypeSelect, eller udvid din form i GlobalModalEditForm.tsx med et nyt felt.

Feltet skal v√¶re required.

C. Korrekt opdatering og visning
Sikre at n√•r type, kategori, billede, galleri eller beskrivelse opdateres, s√• gemmes de korrekt i Supabase, og de kommer med retur (jsonb til array).

D. Validering og feedback
Hvis du fors√∏ger at oprette kategori uden type, skal det fejle p√¶nt.

Hvis du mangler required fields i modal (fx type), skal formularen vise en fejl.

E. Overblik/testside
En testside hvor du kan oprette, redigere og gennemg√• alle modaler, og hvor du kan √•bne en modal direkte via id (evt. via link).

5. Eksempel p√• MODAL-OBJECT JSON
json
Kopi√©r
Rediger
{
  "id": "12345-uuid",
  "type": "fantasy",
  "title": "Min f√∏rste fantasi",
  "image_url": "https://...",
  "gallery_images": [
    { "id": "a", "url": "https://...", "alt": "..." }
  ],
  "categories": [
    { "id": "b", "label": "Intimitet", "color": "orange" }
  ],
  "description": "<p>Richtext her...</p>",
  "created_by": "user-uuid",
  "created_at": "2025-07-16T..."
}
6. TODO / N√ÜSTE SKRIDT
Tilf√∏j type-select/TypeSelect-komponent i modal-form, pr√¶cis som med kategorier.

Brug et separat table modal_types eller fetch unikke fra eksisterende data.

S√∏rg for at type sendes og gemmes sammen med modal og kategori.

UI-validering: type skal v√¶re required.

Test redigering og oprettelse af modal med alle felter (title, image, description, type, categories, galleri).

(Valgfrit) Link direkte til modal fra andre widgets via id.

Kort opsummering:
modal_objects er hovedtabellen.

categories og gallery_images gemmes som JSON arrays (jsonb).

type-feltet bruges til at skelne mellem fx 'fantasy', 'bucketlist' osv.

Du mangler: UI til type-v√¶lger + validering i forms + at sikre type altid sendes ved kategori-oprettelse.

Kommentarer og brugere h√•ndteres med egne tabeller og relationer.



## Changelog - GPT session 2025-07-14 Part 3 ##

Modal Feature Changelog
Overblik
Denne changelog dokumenterer udviklingen og implementeringen af modalfunktioner. Den opdateres l√∏bende efterh√•nden som nye funktioner tilf√∏jes eller eksisterende forbedres.

Planlagte funktioner
Galleri-upload og visning

Mulighed for at uploade flere billeder i et galleri

Galleri vises som sm√• billeder i toppen af modal med pile til scrolling

Kommentarer

Brugere kan skrive kommentarer med tilknytning af dato og brugernavn

Navigation mellem modaler

Pile eller swipe-funktion til at skifte mellem forskellige modaler

Modalbaggrund med sl√∏ring

Baggrunden sl√∏res med backdrop-blur-sm og let hvid overlay (bg-white/80)

Knapper

Alle knapper skal bruge f√¶lles btn-klasse fra globals.css

Dato for oprettelse

Visning af dato for, hvorn√•r mindet eller billedet blev oprettet

Fuld st√∏rrelse billede

Billedet i modal vises i fuld st√∏rrelse (uden hvidt margin eller besk√¶ring)

Upload-knap som CTA

Upload-knap til billeder skal v√¶re visuelt fremtr√¶dende (Call to Action)

RichText Editor

Mulighed for at redigere tekst i modal med RichText editor

Like-funktion

Mulighed for at "‚ù§Ô∏è" et minde direkte i modal (lille ikon med antal likes)

Download-knap

Mulighed for at downloade billedet fra modal

Vis brugerinfo under billede

Viser upload-dato, lille avatar og brugernavn for den, der uploadede billedet

Glidende animation ved billedskift

En let animation ved skift mellem billeder i galleriet for bedre brugeroplevelse

Rediger-knap med fuld redigering

En rediger-knap der √•bner et interface til at redigere alle modalens data (billeder, titel, tekst, kategorier etc.)

Status pr. nuv√¶rende tidspunkt
Pkt. 1 (Galleri-upload og visning):

Galleri vises korrekt med thumbnails og scroll.

Uploadfunktionalitet er under udvikling, men ikke helt f√¶rdig.

Pkt. 14 (Rediger-knap med fuld redigering):

Grundl√¶ggende redigeringsknap fungerer og √•bner et separat redigeringsform.

Integration og synkronisering med galleri og modalens √∏vrige data skal finpudses.

Andre punkter:

Ikke p√•begyndt endnu.

N√¶ste skridt
F√¶rdigg√∏re galleri-upload (pkt. 1) inkl. upload-CTA knap og animation (pkt. 8 og 13)

Forbedre redigeringsinterface og dataflow for fuld redigering (pkt. 14)

P√•begynde kommentar- og like-funktioner (pkt. 2 og 10)

Bem√¶rkninger
Arbejdet foreg√•r l√∏bende i komponenterne GlobalModal.tsx, ImageGallery.tsx og GlobalModalEditForm.tsx

Changelog vil blive opdateret efter hvert st√∏rre trin

‚ö†Ô∏è Husk at bruge denne changelog som reference for udvikling, s√• vi undg√•r dobbeltarbejde og sikrer overblik i modalprojektet. ‚ö†Ô∏è